<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Игра</title>
</head>
<body>
<h1>Игра в консоле</h1>
<script>
    'use strict';

    // Data transfer Object
    const settings = {
    rowsCount: 10,
    colsCount: 10,
    startPositionX: 3,
    startPositionY: 4,
     };

    const player = {
        x: null,
        y: null,

        init(startX, startY) {
            this.x = startX;
            this.y = startY;
        },

        move(nextPoint) {
            switch (nextPoint) {
                case 2:
                    this.y++;
                    break;
                case 4:
                    this.x--;
                    break;
                case 6:
                    this.x++;
                    break;
                case 8:
                    this.y--;
                    break;
                case 1:
                    this.y++;
                    this.x--;
                    break;
                case 3:
                    this.y++;
                    this.x++;
                    break;
                case 7:
                    this.y--;
                    this.x--;
                    break;
                case 9:
                    this.y--;
                    this.x++;
                    break;
            }
        },

        getNextPosition() {
            const nextPosition = {
                x: player.x,
                y: player.y,
            };
        },
    };

const game = {
    settings,
    player,

    run() {
        this.player.init(this.settings.startPositionX, this.settings.startPositionY);
        while (true) {
            this.render();

            const direction = this.getDirection();
            if (direction === -1) {
                alert('До свидания');
                return;
            }

            const nextPoint = this.player.getNextPosition(direction);
            if (this.canPlayerMakeStep(nextPoint)) {
                this.player.move(nextPoint);
            }
        }
    },

    render() {
        let map = '';

        for (let row = 0; row < this.settings.rowsCount; row++ ) {
            for (let col = 0; col < this.settings.colsCount; col++) {
                if (this.player.y === row && this.player.x === col) {
                    map += 'o ';
                } else {
                    map += 'x ';
                }
            }
            map += '\n';
        }
        console.clear();
        console.log(map);
        },

    getDirection() {
        const availableDirections = [-1, 2, 4, 6, 8, 1, 7, 9, 3];
        while (true) {
            const direction = parseInt(prompt('Введите чило куда вы хотите переместиться, для выхода -1'));

            if (!availableDirections.includes(direction)) {
                alert(`Для перемещения необходимо ввести одно из чисел: ${availableDirections.join(', ')}, для выхода -1`);
                continue;
            }
            return direction;
        }
    },

    canPlayerMakeStep() {
        if((this.player.x > -1 && this.player.x < this.settings.rowsCount) && (this.player.y > -1 && this.player.y < this.settings.colsCount)) {
            return true;
        }
    },
    };

    game.run();

</script>
</body>
</html>